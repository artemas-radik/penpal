{"ast":null,"code":"var _jsxFileName = \"/Users/khoinguyen/Programming/penpal/src/components/Left/BrainstormThreadsTray/BrainstormThreadButton/index.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport Request from \"../../../Request/index.jsx\";\nimport Modal from \"../../../Modal\";\nimport { ReactComponent as ChatIcon } from \"../../../../svg/chat-icon.svg\";\nimport { PencilSquareIcon, TrashIcon, CheckIcon, XMarkIcon } from \"@heroicons/react/24/outline\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst BrainstormThreadButton = _ref => {\n  _s();\n  let {\n    thread,\n    brainstormThreads,\n    setBrainstormThreads,\n    selectedBrainstormThread,\n    setSelectedBrainstormThread\n  } = _ref;\n  const [showTextField, setShowTextField] = useState(false);\n  const [textFieldValue, setTextFieldValue] = useState(thread.title);\n  const [isConfirmingDelete, setIsConfirmingDelete] = useState(false);\n  const deleteThread = e => {\n    e.preventDefault();\n    setIsConfirmingDelete(false);\n    const threadRequest = new Request(\"brainstormthreads/\" + thread.id + \"/delete/\", {\n      method: \"DELETE\"\n    });\n    threadRequest.then(res => {\n      const indexOfDeletedThread = brainstormThreads.findIndex(tempThread => tempThread.id === thread.id);\n      setBrainstormThreads(brainstormThreads.filter(tempThread => tempThread.id !== thread.id));\n      if (indexOfDeletedThread === 0) {\n        setSelectedBrainstormThread(brainstormThreads[1].id);\n      } else {\n        setSelectedBrainstormThread(brainstormThreads[indexOfDeletedThread - 1].id);\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n  const handleTextFieldSubmit = e => {\n    e.preventDefault();\n    const threadRequest = new Request(\"brainstormthreads/\" + thread.id + \"/edit/\", {\n      method: \"POST\",\n      data: {\n        title: textFieldValue\n      }\n    });\n    threadRequest.then(res => {\n      setBrainstormThreads(brainstormThreads.map(threadTemp => {\n        if (threadTemp.id === thread.id) {\n          threadTemp.title = textFieldValue;\n        }\n        return threadTemp;\n      }));\n      setShowTextField(false);\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n  const selectedFreeWriteThreadBackgroundClass = () => {\n    return selectedBrainstormThread === thread.id ? \"bg-[#7E55D7]/20\" : \"\";\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Modal, {\n      open: isConfirmingDelete,\n      setOpen: setIsConfirmingDelete,\n      titleText: \"Delete thread\",\n      bodyText: \"Are you sure you want to delete this thread? You can find your previously deleted threads in the trash.\",\n      confirmButtonAction: deleteThread,\n      confirmButtonText: \"Delete\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"items-center flex flex-row hover:cursor-pointer w-full pl-7 py-3 pr-3 \" + selectedFreeWriteThreadBackgroundClass(),\n      onClick: () => setSelectedBrainstormThread(thread.id),\n      children: [/*#__PURE__*/_jsxDEV(ChatIcon, {\n        className: \"w-4 h-4 shrink-0\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 5\n      }, this), !showTextField ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"whitespace-nowrap text-md text-left text-ellipsis overflow-hidden ml-3 mr-3 text-white text-opacity-100 grow\",\n          children: thread.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 7\n        }, this), selectedBrainstormThread === thread.id && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-row mr-3\",\n          children: [/*#__PURE__*/_jsxDEV(PencilSquareIcon, {\n            className: \"w-5 h-5 text-white text-opacity-90 mr-1\",\n            onClick: () => setShowTextField(true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 9\n          }, this), brainstormThreads.length > 1 && /*#__PURE__*/_jsxDEV(TrashIcon, {\n            className: \"w-5 h-5 text-white text-opacity-90\",\n            onClick: () => setIsConfirmingDelete(true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 10\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 8\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"flex flex-row w-full text-white\",\n        onSubmit: handleTextFieldSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          className: \"grow bg-inherit ml-3\",\n          value: textFieldValue,\n          onChange: e => setTextFieldValue(e.target.value),\n          autoFocus: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(CheckIcon, {\n          className: \"w-5 h-5 text-white text-opacity-90 ml-2 mr-1\",\n          onClick: e => handleTextFieldSubmit(e)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(XMarkIcon, {\n          className: \"w-5 h-5 text-white text-opacity-90\",\n          onClick: () => setShowTextField(false)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 6\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true);\n};\n_s(BrainstormThreadButton, \"NK4WdF08u8JRDb/XPUijvUSlMeI=\");\n_c = BrainstormThreadButton;\nexport default BrainstormThreadButton;\nvar _c;\n$RefreshReg$(_c, \"BrainstormThreadButton\");","map":{"version":3,"names":["React","useState","Request","Modal","ReactComponent","ChatIcon","PencilSquareIcon","TrashIcon","CheckIcon","XMarkIcon","BrainstormThreadButton","thread","brainstormThreads","setBrainstormThreads","selectedBrainstormThread","setSelectedBrainstormThread","showTextField","setShowTextField","textFieldValue","setTextFieldValue","title","isConfirmingDelete","setIsConfirmingDelete","deleteThread","e","preventDefault","threadRequest","id","method","then","res","indexOfDeletedThread","findIndex","tempThread","filter","catch","err","console","log","handleTextFieldSubmit","data","map","threadTemp","selectedFreeWriteThreadBackgroundClass","length","target","value"],"sources":["/Users/khoinguyen/Programming/penpal/src/components/Left/BrainstormThreadsTray/BrainstormThreadButton/index.jsx"],"sourcesContent":["import React, { useState } from \"react\"\nimport Request from \"../../../Request/index.jsx\"\nimport Modal from \"../../../Modal\"\nimport { ReactComponent as ChatIcon } from \"../../../../svg/chat-icon.svg\"\nimport {\n\tPencilSquareIcon,\n\tTrashIcon,\n\tCheckIcon,\n\tXMarkIcon,\n} from \"@heroicons/react/24/outline\"\n\nconst BrainstormThreadButton = ({\n\tthread,\n\tbrainstormThreads,\n\tsetBrainstormThreads,\n\tselectedBrainstormThread,\n\tsetSelectedBrainstormThread,\n}) => {\n\tconst [showTextField, setShowTextField] = useState(false)\n\tconst [textFieldValue, setTextFieldValue] = useState(thread.title)\n\tconst [isConfirmingDelete, setIsConfirmingDelete] = useState(false)\n\n\tconst deleteThread = (e) => {\n\t\te.preventDefault()\n\t\tsetIsConfirmingDelete(false)\n\t\tconst threadRequest = new Request(\n\t\t\t\"brainstormthreads/\" + thread.id + \"/delete/\",\n\t\t\t{\n\t\t\t\tmethod: \"DELETE\",\n\t\t\t}\n\t\t)\n\t\tthreadRequest\n\t\t\t.then((res) => {\n\t\t\t\tconst indexOfDeletedThread = brainstormThreads.findIndex(\n\t\t\t\t\t(tempThread) => tempThread.id === thread.id\n\t\t\t\t)\n\t\t\t\tsetBrainstormThreads(\n\t\t\t\t\tbrainstormThreads.filter((tempThread) => tempThread.id !== thread.id)\n\t\t\t\t)\n\t\t\t\tif (indexOfDeletedThread === 0) {\n\t\t\t\t\tsetSelectedBrainstormThread(brainstormThreads[1].id)\n\t\t\t\t} else {\n\t\t\t\t\tsetSelectedBrainstormThread(\n\t\t\t\t\t\tbrainstormThreads[indexOfDeletedThread - 1].id\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tconsole.log(err)\n\t\t\t})\n\t}\n\n\tconst handleTextFieldSubmit = (e) => {\n\t\te.preventDefault()\n\n\t\tconst threadRequest = new Request(\n\t\t\t\"brainstormthreads/\" + thread.id + \"/edit/\",\n\t\t\t{\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tdata: { title: textFieldValue },\n\t\t\t}\n\t\t)\n\t\tthreadRequest\n\t\t\t.then((res) => {\n\t\t\t\tsetBrainstormThreads(\n\t\t\t\t\tbrainstormThreads.map((threadTemp) => {\n\t\t\t\t\t\tif (threadTemp.id === thread.id) {\n\t\t\t\t\t\t\tthreadTemp.title = textFieldValue\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn threadTemp\n\t\t\t\t\t})\n\t\t\t\t)\n\t\t\t\tsetShowTextField(false)\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tconsole.log(err)\n\t\t\t})\n\t}\n\n\tconst selectedFreeWriteThreadBackgroundClass = () => {\n\t\treturn selectedBrainstormThread === thread.id ? \"bg-[#7E55D7]/20\" : \"\"\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<Modal\n\t\t\t\topen={isConfirmingDelete}\n\t\t\t\tsetOpen={setIsConfirmingDelete}\n\t\t\t\ttitleText={\"Delete thread\"}\n\t\t\t\tbodyText={\n\t\t\t\t\t\"Are you sure you want to delete this thread? You can find your previously deleted threads in the trash.\"\n\t\t\t\t}\n\t\t\t\tconfirmButtonAction={deleteThread}\n\t\t\t\tconfirmButtonText={\"Delete\"}\n\t\t\t/>\n\t\t\t<div\n\t\t\t\tclassName={\n\t\t\t\t\t\"items-center flex flex-row hover:cursor-pointer w-full pl-7 py-3 pr-3 \" +\n\t\t\t\t\tselectedFreeWriteThreadBackgroundClass()\n\t\t\t\t}\n\t\t\t\tonClick={() => setSelectedBrainstormThread(thread.id)}\n\t\t\t>\n\t\t\t\t<ChatIcon className='w-4 h-4 shrink-0' />\n\t\t\t\t{!showTextField ? (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<p className='whitespace-nowrap text-md text-left text-ellipsis overflow-hidden ml-3 mr-3 text-white text-opacity-100 grow'>\n\t\t\t\t\t\t\t{thread.title}\n\t\t\t\t\t\t</p>\n\n\t\t\t\t\t\t{selectedBrainstormThread === thread.id && (\n\t\t\t\t\t\t\t<div className='flex flex-row mr-3'>\n\t\t\t\t\t\t\t\t<PencilSquareIcon\n\t\t\t\t\t\t\t\t\tclassName='w-5 h-5 text-white text-opacity-90 mr-1'\n\t\t\t\t\t\t\t\t\tonClick={() => setShowTextField(true)}\n\t\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t\t{brainstormThreads.length > 1 && (\n\t\t\t\t\t\t\t\t\t<TrashIcon\n\t\t\t\t\t\t\t\t\t\tclassName='w-5 h-5 text-white text-opacity-90'\n\t\t\t\t\t\t\t\t\t\tonClick={() => setIsConfirmingDelete(true)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</>\n\t\t\t\t) : (\n\t\t\t\t\t<form\n\t\t\t\t\t\tclassName='flex flex-row w-full text-white'\n\t\t\t\t\t\tonSubmit={handleTextFieldSubmit}\n\t\t\t\t\t>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\t\tclassName='grow bg-inherit ml-3'\n\t\t\t\t\t\t\tvalue={textFieldValue}\n\t\t\t\t\t\t\tonChange={(e) => setTextFieldValue(e.target.value)}\n\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t<CheckIcon\n\t\t\t\t\t\t\tclassName='w-5 h-5 text-white text-opacity-90 ml-2 mr-1'\n\t\t\t\t\t\t\tonClick={(e) => handleTextFieldSubmit(e)}\n\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t<XMarkIcon\n\t\t\t\t\t\t\tclassName='w-5 h-5 text-white text-opacity-90'\n\t\t\t\t\t\t\tonClick={() => setShowTextField(false)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</form>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</>\n\t)\n}\n\nexport default BrainstormThreadButton\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}